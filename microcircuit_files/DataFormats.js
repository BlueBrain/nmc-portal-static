DataFormats={};DataFormats.getPSON=function(b,d){var c=new XMLHttpRequest();c.url=b;c.open("GET",b,true);var a=DataFormats.getPSON.enabled;c.responseType=a?"arraybuffer":"json";c.onload=function(e){if(a){var f=new dcodeIO.PSON.ProgressivePair();d(f.decode(e.target.response))}else{d(e.target.response)}};setTimeout(function(){c.send(null)},100);return c};DataFormats.getPSON.enabled=true;DataFormats.getBinary=function(a,c,b){var b=b||new BB.XMLHttpRequest();b.url=a;b.open("GET",a,true);b.responseType="arraybuffer";b.onload=function(e){var d=new Float32Array(e.target.response);c(d)};setTimeout(function(){b.send(null)},100);return b};DataFormats.parseMultiArray=function(a){var e=new Int32Array(a,0,~~(a.byteLength/4));var g=0;var n=e[g];g++;if(n>1024){throw"Something probably went wrong"}var m=[];for(var c=0;c<n;c++){var j=e[g];g++;var l=e[g];g++;if(l>8){throw"Something probably went wrong"}var d=[];var p=1;for(var b=0;b<l;b++){d.push(e[g]);g++;p*=d[b]}m.push({type:j,dim:d,size:p})}var f=g*4;for(var c in m){var o=m[c];o.data=Nifti.arrayfun[o.type](a,f,o.size);f+=o.size*Nifti.datasize[o.type]}return m};DataFormats.getMultiArray=function(a,c,b){var b=b||new BB.XMLHttpRequest();b.url=a;b.open("GET",a,true);b.responseType="arraybuffer";b.onload=function(d){var f=d.target.response;var e=DataFormats.parseMultiArray(f);c(e)};setTimeout(function(){b.send(null)},100);return b};