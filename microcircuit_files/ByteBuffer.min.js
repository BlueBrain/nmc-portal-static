(function(b){function a(e){function i(j,c,k){j="undefined"!==typeof j?parseInt(j,10):i.DEFAULT_CAPACITY;1>j&&(j=i.DEFAULT_CAPACITY);this.array=k?null:new ArrayBuffer(j);this.view=k?null:new DataView(this.array);this.offset=0;this.markedOffset=-1;this.length=0;this.littleEndian="undefined"!=typeof c?!!c:!1}var g=null;if("function"===typeof require){try{var h=require("buffer"),g=h&&"function"===typeof h.Buffer&&"function"===typeof h.Buffer.isBuffer?h.Buffer:null}catch(f){}}i.VERSION="2.3.1";i.DEFAULT_CAPACITY=16;i.LITTLE_ENDIAN=!0;i.BIG_ENDIAN=!1;i.Long=e||null;i.isByteBuffer=function(c){return c&&(c instanceof i||"object"===typeof c&&(null===c.array||c.array instanceof ArrayBuffer)&&(null===c.view||c.view instanceof DataView)&&"number"===typeof c.offset&&"number"===typeof c.markedOffset&&"number"===typeof c.length&&"boolean"===typeof c.littleEndian)};i.allocate=function(j,c){return new i(j,c)};i.wrap=function(j,c,n){"boolean"===typeof c&&(n=c,c="utf8");if("string"===typeof j){switch(c){case"base64":return i.decode64(j,n);case"hex":return i.decodeHex(j,n);case"binary":return i.decodeBinary(j,n);default:return(new i(i.DEFAULT_CAPACITY,n)).writeUTF8String(j).flip()}}if(g&&g.isBuffer(j)){c=(new Uint8Array(j)).buffer;if(c===j){c=new ArrayBuffer(j.length);for(var m=new Uint8Array(c),l=0,k=j.length;l<k;++l){m[l]=j[l]}}j=c}if(null===j||"object"!==typeof j){throw Error("Cannot wrap null or non-object")}if(i.isByteBuffer(j)){return i.prototype.clone.call(j)}j.array?j=j.array:j.buffer&&(j=j.buffer);if(!(j instanceof ArrayBuffer)){throw Error("Cannot wrap buffer of type "+typeof j+", "+j.constructor.name)}c=new i(0,n,!0);c.array=j;c.view=0<c.array.byteLength?new DataView(c.array):null;c.offset=0;c.length=j.byteLength;return c};i.prototype.LE=function(c){this.littleEndian="undefined"!==typeof c?!!c:!0;return this};i.prototype.BE=function(c){this.littleEndian="undefined"!==typeof c?!c:!1;return this};i.prototype.resize=function(j){if(1>j){return !1}null===this.array&&(this.array=new ArrayBuffer(j),this.view=new DataView(this.array));if(this.array.byteLength<j){var c=new Uint8Array(this.array);j=new ArrayBuffer(j);(new Uint8Array(j)).set(c);this.array=j;this.view=new DataView(j)}return this};i.prototype.slice=function(j,c){if(null==this.array){throw Error(this+" cannot be sliced: Already destroyed")}"undefined"===typeof j&&(j=this.offset);"undefined"===typeof c&&(c=this.length);if(c<=j){var k=c;c=j;j=k}if(0>j||j>this.array.byteLength||1>c||c>this.array.byteLength){throw Error(this+" cannot be sliced: Index out of bounds (0-"+this.array.byteLength+" -> "+j+"-"+c+")")}k=this.clone();k.offset=j;k.length=c;return k};i.prototype.ensureCapacity=function(c){return null===this.array?this.resize(c):this.array.byteLength<c?this.resize(2*this.array.byteLength>=c?2*this.array.byteLength:c):this};i.prototype.flip=function(){this.length=null==this.array?0:this.offset;this.offset=0;return this};i.prototype.mark=function(c){if(null==this.array){throw Error(this+" cannot be marked: Already destroyed")}c="undefined"!==typeof c?parseInt(c,10):this.offset;if(0>c||c>this.array.byteLength){throw Error(this+" cannot be marked: Offset to mark is less than 0 or bigger than the capacity ("+this.array.byteLength+"): "+c)}this.markedOffset=c;return this};i.prototype.reset=function(){if(null===this.array){throw Error(this+" cannot be reset: Already destroyed")}0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.length=this.offset=0;return this};i.prototype.clone=function(){var c=new i(-1,this.littleEndian,!0);c.array=this.array;c.view=this.view;c.offset=this.offset;c.markedOffset=this.markedOffset;c.length=this.length;return c};i.prototype.copy=function(){if(null==this.array){return this.clone()}var j=new i(this.array.byteLength,this.littleEndian),c=new Uint8Array(this.array);(new Uint8Array(j.array)).set(c);j.offset=this.offset;j.markedOffset=this.markedOffset;j.length=this.length;return j};i.prototype.remaining=function(){return null===this.array?0:this.length-this.offset};i.prototype.capacity=function(){return null!=this.array?this.array.byteLength:0};i.prototype.compact=function(){if(null==this.array){throw Error(this+" cannot be compacted: Already destroyed")}this.offset>this.length&&this.flip();if(this.offset===this.length){return this.array=new ArrayBuffer(0),this.view=null,this}if(0===this.offset&&this.length===this.array.byteLength){return this}var j=new Uint8Array(this.array),c=new ArrayBuffer(this.length-this.offset);(new Uint8Array(c)).set(j.subarray(this.offset,this.length));this.array=c;this.markedOffset=this.markedOffset>=this.offset?this.markedOffset-this.offset:-1;this.offset=0;this.length=this.array.byteLength;return this};i.prototype.destroy=function(){null!==this.array&&(this.view=this.array=null,this.offset=0,this.markedOffset=-1,this.length=0);return this};i.prototype.reverse=function(){if(null===this.array){throw Error(this+" cannot be reversed: Already destroyed")}Array.prototype.reverse.call(new Uint8Array(this.array));var c=this.offset;this.offset=this.array.byteLength-this.length;this.markedOffset=-1;this.length=this.array.byteLength-c;this.view=new DataView(this.array);return this};i.prototype.append=function(j,c){j instanceof i||(j=i.wrap(j));if(null===j.array){throw Error(j+" cannot be appended to "+this+": Already destroyed")}var k=j.length-j.offset;if(0==k){return this}0>k&&(j=j.clone().flip(),k=j.length-j.offset);c="undefined"!==typeof c?c:(this.offset+=k)-k;this.ensureCapacity(c+k);k=new Uint8Array(j.array);(new Uint8Array(this.array)).set(k.subarray(j.offset,j.length),c);return this};i.prototype.prepend=function(j,c){j instanceof i||(j=i.wrap(j));if(null===j.array){throw j+" cannot be prepended to "+this+": Already destroyed"}var m=j.length-j.offset;if(0==m){return this}0>m&&(j=j.clone().flip(),m=j.length-j.offset);var l="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;var k=m-c;0<k?(this.ensureCapacity(this.length+k),this.append(this,m),this.offset+=k,this.length+=k,this.append(j,0)):this.append(j,c-m);l&&(this.offset-=m);return this};i.prototype.writeInt8=function(j,c){c="undefined"!=typeof c?c:(this.offset+=1)-1;this.ensureCapacity(c+1);this.view.setInt8(c,j);return this};i.prototype.readInt8=function(c){c="undefined"!==typeof c?c:(this.offset+=1)-1;if(c>=this.array.byteLength){throw Error("Cannot read int8 from "+this+" at "+c+": Capacity overflow")}return this.view.getInt8(c)};i.prototype.writeByte=i.prototype.writeInt8;i.prototype.readByte=i.prototype.readInt8;i.prototype.writeUint8=function(j,c){c="undefined"!==typeof c?c:(this.offset+=1)-1;this.ensureCapacity(c+1);this.view.setUint8(c,j);return this};i.prototype.readUint8=function(c){c="undefined"!==typeof c?c:(this.offset+=1)-1;if(c+1>this.array.byteLength){throw Error("Cannot read uint8 from "+this+" at "+c+": Capacity overflow")}return this.view.getUint8(c)};i.prototype.writeInt16=function(j,c){c="undefined"!==typeof c?c:(this.offset+=2)-2;this.ensureCapacity(c+2);this.view.setInt16(c,j,this.littleEndian);return this};i.prototype.readInt16=function(c){c="undefined"!==typeof c?c:(this.offset+=2)-2;if(c+2>this.array.byteLength){throw Error("Cannot read int16 from "+this+" at "+c+": Capacity overflow")}return this.view.getInt16(c,this.littleEndian)};i.prototype.writeShort=i.prototype.writeInt16;i.prototype.readShort=i.prototype.readInt16;i.prototype.writeUint16=function(j,c){c="undefined"!==typeof c?c:(this.offset+=2)-2;this.ensureCapacity(c+2);this.view.setUint16(c,j,this.littleEndian);return this};i.prototype.readUint16=function(c){c="undefined"!==typeof c?c:(this.offset+=2)-2;if(c+2>this.array.byteLength){throw Error("Cannot read int16 from "+this+" at "+c+": Capacity overflow")}return this.view.getUint16(c,this.littleEndian)};i.prototype.writeInt32=function(j,c){c="undefined"!==typeof c?c:(this.offset+=4)-4;this.ensureCapacity(c+4);this.view.setInt32(c,j,this.littleEndian);return this};i.prototype.readInt32=function(c){c="undefined"!==typeof c?c:(this.offset+=4)-4;if(c+4>this.array.byteLength){throw Error("Cannot read int32 from "+this+" at "+c+": Capacity overflow")}return this.view.getInt32(c,this.littleEndian)};i.prototype.writeInt=i.prototype.writeInt32;i.prototype.readInt=i.prototype.readInt32;i.prototype.writeUint32=function(j,c){c="undefined"!=typeof c?c:(this.offset+=4)-4;this.ensureCapacity(c+4);this.view.setUint32(c,j,this.littleEndian);return this};i.prototype.readUint32=function(c){c="undefined"!==typeof c?c:(this.offset+=4)-4;if(c+4>this.array.byteLength){throw Error("Cannot read uint32 from "+this+" at "+c+": Capacity overflow")}return this.view.getUint32(c,this.littleEndian)};i.prototype.writeFloat32=function(j,c){c="undefined"!==typeof c?c:(this.offset+=4)-4;this.ensureCapacity(c+4);this.view.setFloat32(c,j,this.littleEndian);return this};i.prototype.readFloat32=function(c){c="undefined"!==typeof c?c:(this.offset+=4)-4;if(null===this.array||c+4>this.array.byteLength){throw Error("Cannot read float32 from "+this+" at "+c+": Capacity overflow")}return this.view.getFloat32(c,this.littleEndian)};i.prototype.writeFloat=i.prototype.writeFloat32;i.prototype.readFloat=i.prototype.readFloat32;i.prototype.writeFloat64=function(j,c){c="undefined"!==typeof c?c:(this.offset+=8)-8;this.ensureCapacity(c+8);this.view.setFloat64(c,j,this.littleEndian);return this};i.prototype.readFloat64=function(c){c="undefined"!==typeof c?c:(this.offset+=8)-8;if(null===this.array||c+8>this.array.byteLength){throw Error("Cannot read float64 from "+this+" at "+c+": Capacity overflow")}return this.view.getFloat64(c,this.littleEndian)};i.prototype.writeDouble=i.prototype.writeFloat64;i.prototype.readDouble=i.prototype.readFloat64;e&&(i.prototype.writeInt64=function(j,c){c="undefined"!==typeof c?c:(this.offset+=8)-8;"object"===typeof j&&j instanceof e||(j=e.fromNumber(j,!1));this.ensureCapacity(c+8);this.littleEndian?(this.view.setInt32(c,j.getLowBits(),!0),this.view.setInt32(c+4,j.getHighBits(),!0)):(this.view.setInt32(c,j.getHighBits(),!1),this.view.setInt32(c+4,j.getLowBits(),!1));return this},i.prototype.readInt64=function(c){c="undefined"!==typeof c?c:(this.offset+=8)-8;if(null===this.array||c+8>this.array.byteLength){throw this.offset-=8,Error("Cannot read int64 from "+this+" at "+c+": Capacity overflow")}return this.littleEndian?e.fromBits(this.view.getInt32(c,!0),this.view.getInt32(c+4,!0),!1):e.fromBits(this.view.getInt32(c+4,!1),this.view.getInt32(c,!1),!1)},i.prototype.writeUint64=function(j,c){c="undefined"!==typeof c?c:(this.offset+=8)-8;"object"===typeof j&&j instanceof e||(j=e.fromNumber(j,!0));this.ensureCapacity(c+8);this.littleEndian?(this.view.setUint32(c,j.getLowBitsUnsigned(),!0),this.view.setUint32(c+4,j.getHighBitsUnsigned(),!0)):(this.view.setUint32(c,j.getHighBitsUnsigned(),!1),this.view.setUint32(c+4,j.getLowBitsUnsigned(),!1));return this},i.prototype.readUint64=function(c){c="undefined"!==typeof c?c:(this.offset+=8)-8;if(null===this.array||c+8>this.array.byteLength){throw this.offset-=8,Error("Cannot read int64 from "+this+" at "+c+": Capacity overflow")}return this.littleEndian?e.fromBits(this.view.getUint32(c,!0),this.view.getUint32(c+4,!0),!0):e.fromBits(this.view.getUint32(c+4,!1),this.view.getUint32(c,!1),!0)},i.prototype.writeLong=i.prototype.writeInt64,i.prototype.readLong=i.prototype.readInt64);i.MAX_VARINT32_BYTES=5;i.prototype.writeVarint32=function(j,c){var m="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;j>>>=0;this.ensureCapacity(c+i.calculateVarint32(j));var l=this.view,k=0;l.setUint8(c,j|128);128<=j?(l.setUint8(c+1,j>>7|128),16384<=j?(l.setUint8(c+2,j>>14|128),2097152<=j?(l.setUint8(c+3,j>>21|128),268435456<=j?(l.setUint8(c+4,j>>28&127),k=5):(l.setUint8(c+3,l.getUint8(c+3)&127),k=4)):(l.setUint8(c+2,l.getUint8(c+2)&127),k=3)):(l.setUint8(c+1,l.getUint8(c+1)&127),k=2)):(l.setUint8(c,l.getUint8(c)&127),k=1);return m?(this.offset+=k,this):k};i.prototype.readVarint32=function(j){var c="undefined"===typeof j;j="undefined"!==typeof j?j:this.offset;var n=0,m,l=this.view,k=0;do{m=l.getUint8(j+n),n<i.MAX_VARINT32_BYTES&&(k|=(m&127)<<7*n>>>0),++n}while(m&128);k|=0;return c?(this.offset+=n,k):{value:k,length:n}};i.prototype.writeZigZagVarint32=function(j,c){return this.writeVarint32(i.zigZagEncode32(j),c)};i.prototype.readZigZagVarint32=function(c){c=this.readVarint32(c);return"object"===typeof c?(c.value=i.zigZagDecode32(c.value),c):i.zigZagDecode32(c)};i.MAX_VARINT64_BYTES=10;e&&(i.prototype.writeVarint64=function(j,c){var q="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;"object"===typeof j&&j instanceof e||(j=e.fromNumber(j,!1));var p=j.toInt()>>>0,o=j.shiftRightUnsigned(28).toInt()>>>0,n=j.shiftRightUnsigned(56).toInt()>>>0,l=i.calculateVarint64(j);this.ensureCapacity(c+l);var m=this.view;switch(l){case 10:m.setUint8(c+9,n>>>7|128);case 9:m.setUint8(c+8,n|128);case 8:m.setUint8(c+7,o>>>21|128);case 7:m.setUint8(c+6,o>>>14|128);case 6:m.setUint8(c+5,o>>>7|128);case 5:m.setUint8(c+4,o|128);case 4:m.setUint8(c+3,p>>>21|128);case 3:m.setUint8(c+2,p>>>14|128);case 2:m.setUint8(c+1,p>>>7|128);case 1:m.setUint8(c+0,p|128)}m.setUint8(c+l-1,m.getUint8(c+l-1)&127);return q?(this.offset+=l,this):l},i.prototype.readVarint64=function(l){var j="undefined"===typeof l,q=l="undefined"!==typeof l?l:this.offset,r=this.view,p,o=0,m=0,n;n=r.getUint8(l++);p=n&127;if(n&128&&(n=r.getUint8(l++),p|=(n&127)<<7,n&128&&(n=r.getUint8(l++),p|=(n&127)<<14,n&128&&(n=r.getUint8(l++),p|=(n&127)<<21,n&128&&(n=r.getUint8(l++),o=n&127,n&128&&(n=r.getUint8(l++),o|=(n&127)<<7,n&128&&(n=r.getUint8(l++),o|=(n&127)<<14,n&128&&(n=r.getUint8(l++),o|=(n&127)<<21,n&128&&(n=r.getUint8(l++),m=n&127,n&128&&(n=r.getUint8(l++),m|=(n&127)<<7,n&128)))))))))){throw Error("Data must be corrupt: Buffer overrun")}r=e.from28Bits(p,o,m,!1);return j?(this.offset=l,r):{value:r,length:l-q}},i.prototype.writeZigZagVarint64=function(j,c){return this.writeVarint64(i.zigZagEncode64(j),c)},i.prototype.readZigZagVarint64=function(c){c=this.readVarint64(c);return"object"!==typeof c||c instanceof e?i.zigZagDecode64(c):(c.value=i.zigZagDecode64(c.value),c)});i.prototype.writeVarint=i.prototype.writeVarint32;i.prototype.readVarint=i.prototype.readVarint32;i.prototype.writeZigZagVarint=i.prototype.writeZigZagVarint32;i.prototype.readZigZagVarint=i.prototype.readZigZagVarint32;i.calculateVarint32=function(c){c>>>=0;return 128>c?1:16384>c?2:2097152>c?3:268435456>c?4:5};e&&(i.calculateVarint64=function(j){"object"===typeof j&&j instanceof e||(j=e.fromNumber(j,!1));var c=j.toInt()>>>0,k=j.shiftRightUnsigned(28).toInt()>>>0;j=j.shiftRightUnsigned(56).toInt()>>>0;return 0==j?0==k?16384>c?128>c?1:2:2097152>c?3:4:16384>k?128>k?5:6:2097152>k?7:8:128>j?9:10});i.zigZagEncode32=function(c){return((c|=0)<<1^c>>31)>>>0};i.zigZagDecode32=function(c){return c>>>1^-(c&1)|0};e&&(i.zigZagEncode64=function(c){"object"===typeof c&&c instanceof e?c.unsigned&&(c=c.toSigned()):c=e.fromNumber(c,!1);return c.shiftLeft(1).xor(c.shiftRight(63)).toUnsigned()},i.zigZagDecode64=function(c){"object"===typeof c&&c instanceof e?c.unsigned||(c=c.toUnsigned()):c=e.fromNumber(c,!0);return c.shiftRightUnsigned(1).xor(c.and(e.ONE).toSigned().negate()).toSigned()});i.decodeUTF8Char=function(t,s){var q=t.readUint8(s),r,p,o,m,n,j=s;if(0==(q&128)){s+=1}else{if(192==(q&224)){r=t.readUint8(s+1),q=(q&31)<<6|r&63,s+=2}else{if(224==(q&240)){r=t.readUint8(s+1),p=t.readUint8(s+2),q=(q&15)<<12|(r&63)<<6|p&63,s+=3}else{if(240==(q&248)){r=t.readUint8(s+1),p=t.readUint8(s+2),o=t.readUint8(s+3),q=(q&7)<<18|(r&63)<<12|(p&63)<<6|o&63,s+=4}else{if(248==(q&252)){r=t.readUint8(s+1),p=t.readUint8(s+2),o=t.readUint8(s+3),m=t.readUint8(s+4),q=(q&3)<<24|(r&63)<<18|(p&63)<<12|(o&63)<<6|m&63,s+=5}else{if(252==(q&254)){r=t.readUint8(s+1),p=t.readUint8(s+2),o=t.readUint8(s+3),m=t.readUint8(s+4),n=t.readUint8(s+5),q=(q&1)<<30|(r&63)<<24|(p&63)<<18|(o&63)<<12|(m&63)<<6|n&63,s+=6}else{throw Error("Cannot decode UTF8 character at offset "+s+": charCode (0x"+q.toString(16)+") is invalid")}}}}}}return{"char":q,length:s-j}};i.encodeUTF8Char=function(k,j,m){var l=m;if(0>k){throw Error("Cannot encode UTF8 character: charCode ("+k+") is negative")}if(128>k){j.writeUint8(k&127,m),m+=1}else{if(2048>k){j.writeUint8(k>>6&31|192,m).writeUint8(k&63|128,m+1),m+=2}else{if(65536>k){j.writeUint8(k>>12&15|224,m).writeUint8(k>>6&63|128,m+1).writeUint8(k&63|128,m+2),m+=3}else{if(2097152>k){j.writeUint8(k>>18&7|240,m).writeUint8(k>>12&63|128,m+1).writeUint8(k>>6&63|128,m+2).writeUint8(k&63|128,m+3),m+=4}else{if(67108864>k){j.writeUint8(k>>24&3|248,m).writeUint8(k>>18&63|128,m+1).writeUint8(k>>12&63|128,m+2).writeUint8(k>>6&63|128,m+3).writeUint8(k&63|128,m+4),m+=5}else{if(2147483648>k){j.writeUint8(k>>30&1|252,m).writeUint8(k>>24&63|128,m+1).writeUint8(k>>18&63|128,m+2).writeUint8(k>>12&63|128,m+3).writeUint8(k>>6&63|128,m+4).writeUint8(k&63|128,m+5),m+=6}else{throw Error("Cannot encode UTF8 character: charCode (0x"+k.toString(16)+") is too large (>= 0x80000000)")}}}}}}return m-l};i.calculateUTF8Char=function(c){if(0>c){throw Error("Cannot calculate length of UTF8 character: charCode ("+c+") is negative")}if(128>c){return 1}if(2048>c){return 2}if(65536>c){return 3}if(2097152>c){return 4}if(67108864>c){return 5}if(2147483648>c){return 6}throw Error("Cannot calculate length of UTF8 character: charCode (0x"+c.toString(16)+") is too large (>= 0x80000000)")};i.a=function(j){j=""+j;for(var c=0,l=0,k=j.length;l<k;++l){c+=i.calculateUTF8Char(j.charCodeAt(l))}return c};var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=d+"";i.encode64=function(j){j instanceof i?j.length<j.offset&&(j=j.clone().flip()):j=i.wrap(j);var c,q,p,o,n=j.offset,l=0,m=[];do{c=j.readUint8(n++),q=j.length>n?j.readUint8(n++):0,p=j.length>n?j.readUint8(n++):0,o=c<<16|q<<8|p,c=o>>18&63,q=o>>12&63,p=o>>6&63,o&=63,m[l++]=d.charAt(c)+d.charAt(q)+d.charAt(p)+d.charAt(o)}while(n<j.length);n=m.join("");j=(j.length-j.offset)%3;return(j?n.slice(0,j-3):n)+"===".slice(j||3)};i.decode64=function(s,r){if("string"!==typeof s){throw Error("Illegal argument: Not a string")}var q,p,o,n,j,m=0,c=new i(Math.ceil(s.length/3),r);do{q=d.indexOf(s.charAt(m++));p=d.indexOf(s.charAt(m++));n=d.indexOf(s.charAt(m++));j=d.indexOf(s.charAt(m++));if(0>q||0>p||0>n||0>j){throw Error("Illegal argument: Not a valid base64 encoded string")}o=q<<18|p<<12|n<<6|j;q=o>>16&255;p=o>>8&255;o&=255;64==n?c.writeUint8(q):64==j?c.writeUint8(q).writeUint8(p):c.writeUint8(q).writeUint8(p).writeUint8(o)}while(m<s.length);return c.flip()};i.encodeHex=function(j){j instanceof i?j.length<j.offset&&(j=j.clone().flip()):j=i.wrap(j);if(null===j.array){return""}for(var c,m=[],l=j.offset,k=j.length;l<k;++l){c=j.view.getUint8(l).toString(16).toUpperCase(),2>c.length&&(c="0"+c),m.push(c)}return m.join("")};i.decodeHex=function(j,c){if("string"!==typeof j){throw Error("Illegal argument: Not a string")}if(0!==j.length%2){throw Error("Illegal argument: Not a hex encoded string")}for(var m=new i(j.length/2,c),l=0,k=j.length;l<k;l+=2){m.writeUint8(parseInt(j.substring(l,l+2),16))}return m.flip()};i.encodeBinary=function(j){j instanceof i?j.length<j.offset&&(j=j.clone().flip()):j=i.wrap(j);var c=[],l=j.view,k=j.offset;for(j=j.length;k<j;++k){c.push(String.fromCharCode(l.getUint8(k)))}return c.join("")};i.decodeBinary=function(j,c){if("string"!==typeof j){throw Error("Illegal argument: Not a string")}for(var p=j.length,o=new ArrayBuffer(p),n=new DataView(o),m,l=0;l<p;++l){if(255<(m=j.charCodeAt(l))){throw Error("Illegal argument: Not a binary string (char code "+m+")")}n.setUint8(l,m)}m=new i(p,c,!0);m.array=o;m.view=n;m.length=p;return m};i.prototype.writeUTF8String=function(j,c){var n="undefined"===typeof c,m=c="undefined"!==typeof c?c:this.offset,l=i.a(j);this.ensureCapacity(c+l);for(var l=0,k=j.length;l<k;++l){c+=i.encodeUTF8Char(j.charCodeAt(l),this,c)}return n?(this.offset=c,this):c-m};i.prototype.readUTF8String=function(j,c){var p="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;for(var o,n="",m=c,l=0;l<j;++l){o=i.decodeUTF8Char(this,c),c+=o.length,n+=String.fromCharCode(o["char"])}return p?(this.offset=c,n):{string:n,length:c-m}};i.prototype.readUTF8StringBytes=function(j,c){var n="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;var m,l="",k=c;for(j=c+j;c<j;){m=i.decodeUTF8Char(this,c),c+=m.length,l+=String.fromCharCode(m["char"])}if(c!=j){throw Error("Actual string length differs from the specified: "+((c>j?"+":"")+c-j)+" bytes")}return n?(this.offset=c,l):{string:l,length:c-k}};i.prototype.writeLString=function(j,c){j=""+j;var l="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;var k=i.encodeUTF8Char(j.length,this,c),k=k+this.writeUTF8String(j,c+k);return l?(this.offset+=k,this):k};i.prototype.readLString=function(j){var c="undefined"===typeof j;j="undefined"!==typeof j?j:this.offset;var k=i.decodeUTF8Char(this,j);j=this.readUTF8String(k["char"],j+k.length);return c?(this.offset+=k.length+j.length,j.string):{string:j.string,length:k.length+j.length}};i.prototype.writeVString=function(j,c){j=""+j;var l="undefined"===typeof c;c="undefined"!==typeof c?c:this.offset;var k=this.writeVarint32(i.a(j),c),k=k+this.writeUTF8String(j,c+k);return l?(this.offset+=k,this):k};i.prototype.readVString=function(k){var j="undefined"===typeof k;k="undefined"!==typeof k?k:this.offset;var l=this.readVarint32(k);k=this.readUTF8StringBytes(l.value,k+l.length);return j?(this.offset+=l.length+k.length,k.string):{string:k.string,length:l.length+k.length}};i.prototype.writeCString=function(k,j){var m="undefined"===typeof j;j="undefined"!==typeof j?j:this.offset;var l=this.writeUTF8String(""+k,j);this.writeUint8(0,j+l);return m?(this.offset+=l+1,this):l+1};i.prototype.readCString=function(j){var c="undefined"===typeof j;j="undefined"!==typeof j?j:this.offset;var m,l="",k=j;do{m=i.decodeUTF8Char(this,j),j+=m.length,0!=m["char"]&&(l+=String.fromCharCode(m["char"]))}while(0!=m["char"]);return c?(this.offset=j,l):{string:l,length:j-k}};i.prototype.writeJSON=function(k,j,l){l="function"===typeof l?l:JSON.stringify;return this.writeLString(l(k),j)};i.prototype.readJSON=function(k,j){j="function"===typeof j?j:JSON.parse;var l=this.readLString(k);return"string"===typeof l?j(l):{data:j(l.string),length:l.length}};i.prototype.toColumns=function(l){if(null===this.array){return"DESTROYED"}l="undefined"!==typeof l?parseInt(l,10):16;1>l&&(l=16);for(var j="",r=[],q,p=this.view,j=0==this.offset&&0==this.length?j+"|":0==this.length?j+">":0==this.offset?j+"<":j+" ",o=0,m=this.array.byteLength;o<m;++o){if(0<o&&0==o%l){for(;j.length<3*l+1;){j+="   "}r.push(j);j=" "}q=p.getUint8(o).toString(16).toUpperCase();2>q.length&&(q="0"+q);j+=q;j=o+1==this.offset&&o+1==this.length?j+"|":o+1==this.offset?j+"<":o+1==this.length?j+">":j+" "}" "!=j&&r.push(j);o=0;for(m=r.length;o<m;++o){for(;r[o].length<3*l+1;){r[o]+="   "}}for(var n=0,j="",o=0,m=this.array.byteLength;o<m;++o){0<o&&0==o%l&&(r[n]+=" "+j,j="",n++),q=p.getUint8(o),j+=32<q&&127>q?String.fromCharCode(q):"."}""!=j&&(r[n]+=" "+j);return r.join("\n")};i.prototype.printDebug=function(c){"function"!==typeof c&&(c=console.log.bind(console));c((null!=this.array?"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")":"ByteBuffer(DESTROYED)")+"\n-------------------------------------------------------------------\n"+this.toColumns()+"\n")};i.prototype.toHex=function(j){var c="",m=this.view,l,k;if(j){if(null===this.array){return"DESTROYED"}c=0==this.offset&&0==this.length?c+"|":0==this.length?c+">":0==this.offset?c+"<":c+" ";l=0;for(k=this.array.byteLength;l<k;++l){j=m.getUint8(l).toString(16).toUpperCase(),2>j.length&&(j="0"+j),c+=j,c=l+1===this.offset&&l+1===this.length?c+"|":l+1==this.offset?c+"<":l+1==this.length?c+">":c+" "}return c}return i.encodeHex(this)};i.prototype.toBinary=function(){return i.encodeBinary(this)};i.prototype.toBase64=function(){return null===this.array||this.offset>=this.length?"":i.encode64(this)};i.prototype.toUTF8=function(){return null===this.array||this.offset>=this.length?"":this.readUTF8StringBytes(this.length-this.offset,this.offset).string};i.prototype.toString=function(c){switch(c||""){case"utf8":return this.toUTF8();case"base64":return this.toBase64();case"hex":return this.toHex();case"binary":return this.toBinary();case"debug":return this.toHex(!0);default:return null===this.array?"ByteBuffer(DESTROYED)":"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")"}};i.prototype.toArrayBuffer=function(k){if(null===this.array){return null}var j=this.clone();j.offset>j.length&&j.flip();var l=!1;if(0<j.offset||j.length<j.array.byteLength){j.compact(),l=!0}return k&&!l?j.copy().array:j.array};g&&(i.prototype.toBuffer=function(){if(null===this.array){return null}var k=this.offset,j=this.length;if(k>j){var l=k,k=j,j=l}return new g((new Uint8Array(this.array)).subarray(k,j))});return i}"undefined"!==typeof module&&module.exports?module.exports=a(require("long")):"undefined"!==typeof define&&define.amd?define("ByteBuffer",["Math/Long"],function(c){return a(c)}):(b.dcodeIO||(b.dcodeIO={}),b.dcodeIO.ByteBuffer=a(b.dcodeIO.Long))})(this);